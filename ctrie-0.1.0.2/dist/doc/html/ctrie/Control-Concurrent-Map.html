<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Concurrent.Map</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Concurrent-Map.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ctrie-0.1.0.2: Non-blocking concurrent map</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Control.Concurrent.Map</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Construction</a></li><li><a href="#g:2">Modification</a></li><li><a href="#g:3">Query</a></li><li><a href="#g:4">Lists</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A non-blocking concurrent map from hashable keys to values.</p><p>The implementation is based on <em>lock-free concurrent hash tries</em>
 (aka <em>Ctries</em>) as described by:</p><ul><li>Aleksander Prokopec, Phil Bagwell, Martin Odersky,
      &quot;<em>Cache-Aware Lock-Free Concurent Hash Tries</em>&quot;</li><li>Aleksander Prokopec, Nathan G. Bronson, Phil Bagwell, Martin
      Odersky &quot;<em>Concurrent Tries with Efficient Non-Blocking Snapshots</em>&quot;</li></ul><p>Operations have a worst-case complexity of <em>O(log n)</em>, with a base
 equal to the size of the native <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Word.html#t:Word">Word</a></code>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Map">Map</a> k v</li><li class="src short"><a href="#v:mkWeakKey">mkWeakKey</a> ::  <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; b -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> () -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-Mem-Weak.html#t:Weak">Weak</a> b)</li><li class="src short"><a href="#v:empty">empty</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Control-Concurrent-Map.html#t:Map">Map</a> k v)</li><li class="src short"><a href="#v:insert">insert</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Eq.html#t:Eq">Eq</a> k, <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/hashable-1.2.2.0/doc/html/Data-Hashable.html#t:Hashable">Hashable</a> k) =&gt; k -&gt; v -&gt; <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:delete">delete</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Eq.html#t:Eq">Eq</a> k, <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/hashable-1.2.2.0/doc/html/Data-Hashable.html#t:Hashable">Hashable</a> k) =&gt; k -&gt; <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:lookup">lookup</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Eq.html#t:Eq">Eq</a> k, <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/hashable-1.2.2.0/doc/html/Data-Hashable.html#t:Hashable">Hashable</a> k) =&gt; k -&gt; <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> v)</li><li class="src short"><a href="#v:fromList">fromList</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Eq.html#t:Eq">Eq</a> k, <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/hashable-1.2.2.0/doc/html/Data-Hashable.html#t:Hashable">Hashable</a> k) =&gt; [(k, v)] -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Control-Concurrent-Map.html#t:Map">Map</a> k v)</li><li class="src short"><a href="#v:unsafeToList">unsafeToList</a> ::  <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> [(k, v)]</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Map" class="def">Map</a> k v</p><div class="doc"><p>A map from keys <code>k</code> to values <code>v</code>.</p></div></div><div class="top"><p class="src"><a name="v:mkWeakKey" class="def">mkWeakKey</a> ::  <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; b -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> () -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-Mem-Weak.html#t:Weak">Weak</a> b)</p></div><h1 id="g:1">Construction</h1><div class="top"><p class="src"><a name="v:empty" class="def">empty</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Control-Concurrent-Map.html#t:Map">Map</a> k v)</p><div class="doc"><p><em>O(1)</em>. Construct an empty map.</p></div></div><h1 id="g:2">Modification</h1><div class="top"><p class="src"><a name="v:insert" class="def">insert</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Eq.html#t:Eq">Eq</a> k, <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/hashable-1.2.2.0/doc/html/Data-Hashable.html#t:Hashable">Hashable</a> k) =&gt; k -&gt; v -&gt; <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p><em>O(log n)</em>. Associate the given value with the given key.
 If the key is already present in the map, the old value is replaced.</p></div></div><div class="top"><p class="src"><a name="v:delete" class="def">delete</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Eq.html#t:Eq">Eq</a> k, <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/hashable-1.2.2.0/doc/html/Data-Hashable.html#t:Hashable">Hashable</a> k) =&gt; k -&gt; <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p><em>O(log n)</em>. Remove the given key and its associated value from the map,
 if present.</p></div></div><h1 id="g:3">Query</h1><div class="top"><p class="src"><a name="v:lookup" class="def">lookup</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Eq.html#t:Eq">Eq</a> k, <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/hashable-1.2.2.0/doc/html/Data-Hashable.html#t:Hashable">Hashable</a> k) =&gt; k -&gt; <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> v)</p><div class="doc"><p><em>O(log n)</em>. Return the value associated with the given key, or <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#v:Nothing">Nothing</a></code>.</p></div></div><h1 id="g:4">Lists</h1><div class="top"><p class="src"><a name="v:fromList" class="def">fromList</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Eq.html#t:Eq">Eq</a> k, <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/hashable-1.2.2.0/doc/html/Data-Hashable.html#t:Hashable">Hashable</a> k) =&gt; [(k, v)] -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Control-Concurrent-Map.html#t:Map">Map</a> k v)</p><div class="doc"><p><em>O(n * log n)</em>. Construct a map from a list of key/value pairs.</p></div></div><div class="top"><p class="src"><a name="v:unsafeToList" class="def">unsafeToList</a> ::  <a href="Control-Concurrent-Map.html#t:Map">Map</a> k v -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> [(k, v)]</p><div class="doc"><p><em>O(n)</em>. Unsafely convert the map to a list of key/value pairs.</p><p>WARNING: <code><a href="Control-Concurrent-Map.html#v:unsafeToList">unsafeToList</a></code> makes no atomicity guarantees. Concurrent
 changes to the map will lead to inconsistent results.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>